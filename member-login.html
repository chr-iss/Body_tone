<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Body Tone Gym - Member Login</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      :root {
        --primary: #2c3e50;
        --secondary: #3498db;
        --accent: #e74c3c;
        --light: #ecf0f1;
        --dark: #2c3e50;
        --success: #2ecc71;
        --error: #e74c3c;
      }

      * { margin: 0; padding: 0; box-sizing: border-box; font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif; }

      body {
        background: linear-gradient(135deg, #838181, #c3c4c5);
        display: flex;
        background: linear-gradient(135deg, rgba(44, 62, 80, 0), rgba(83, 83, 83, 0)), url('https://images.unsplash.com/photo-1534438327276-14e5300c3a48?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80') no-repeat center/cover;
        color: white;
        padding: 40px;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        padding: 20px;
      }

      .container {
        display: flex;
        max-width: 1000px;
        width: 100%;
        background: white;
        border-radius: 15px;
        overflow: hidden;
        box-shadow: 0 15px 30px rgba(0,0,0,0.2);
      }

      .left-panel {
        flex: 1;
        background: linear-gradient(135deg, rgba(44,62,80,0.9), rgba(52,152,219,0.9)), url('https://images.unsplash.com/photo-1534438327276-14e5300c3a48?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80') no-repeat center/cover;
        color: white;
        padding: 40px;
        display: flex;
        flex-direction: column;
        justify-content: center;
      }

      .right-panel {
        flex: 1;
        padding: 40px;
        display: flex;
        flex-direction: column;
        justify-content: center;
      }

      .logo { display: flex; align-items: center; margin-bottom: 30px; }
      .logo i { font-size: 2.5rem; color: #000000; margin-right: 15px; }
      .logo h1 { font-size: 2rem; font-weight: 700; }

      .welcome-text h2 { font-size: 2.2rem; margin-bottom: 20px; }
      .welcome-text p { font-size: 1.1rem; margin-bottom: 30px; opacity: 0.9; }

      .features { list-style: none; margin-top: 30px; }
      .features li { display: flex; align-items: center; margin-bottom: 20px; }
      .features i { font-size: 1.5rem; color: #000000; margin-right: 15px; width: 30px; text-align: center; }

      .login-header { text-align: center; margin-bottom: 30px; }
      .login-header h2 { font-size: 2rem; color: #2c3e50; margin-bottom: 10px; }
      .login-header p { color: #7f8c8d; }

      .form-group { margin-bottom: 20px; }
      .form-group label { display: block; margin-bottom: 8px; font-weight: 600; color: #2c3e50; }
      .form-group input {
        width: 100%; padding: 15px; border: 2px solid #ecf0f1; border-radius: 8px; font-size: 16px;
        transition: all 0.3s ease;
      }
      .form-group input:focus { border-color: #3498db; outline: none; }

      .btn {
        display: block; width: 100%; padding: 15px; background: #3498db; color: white; border: none;
        border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.3s ease;
      }
      .btn:hover { background: #2980b9; transform: translateY(-2px); }

      .signup-link { text-align: center; margin-top: 30px; color: #7f8c8d; }
      .signup-link a { color: #3498db; text-decoration: none; font-weight: 600; }
      .signup-link a:hover { text-decoration: underline; }

      .alert { padding: 15px; border-radius: 8px; margin-bottom: 20px; display: none; text-align: center; font-weight: bold; }
      .alert-error { background: #ffebee; color: #c62828; border: 1px solid #ef9a9a; }
      .alert-success { background: #e8f5e9; color: #2e7d32; border: 1px solid #a5d6a7; }

      @media (max-width: 768px) { .container { flex-direction: column; max-width: 450px; } .left-panel, .right-panel { padding: 30px; } }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="left-panel">
        <div class="logo">
          <i class="fas fa-dumbbell"></i>
          <h1>Body Tone Gym</h1>
        </div>
        <div class="welcome-text">
          <h2>Welcome Back!</h2>
          <p>Sign in to access your membership dashboard, book classes, and track your fitness journey.</p>
        </div>
        <ul class="features">
          <li><i class="fas fa-qrcode"></i>Quick check-in with QR code</li>
          <li><i class="fas fa-calendar-alt"></i>Manage your class bookings</li>
          <li><i class="fas fa-chart-line"></i>Track your progress and attendance</li>
          <li><i class="fas fa-credit-card"></i>View payment history and status</li>
        </ul>
      </div>

      <div class="right-panel">
        <div class="login-header">
          <h2>Member Login</h2>
          <p>Access your personal dashboard</p>
        </div>

        <div class="alert alert-error" id="errorAlert"></div>
        <div class="alert alert-success" id="successAlert"></div>

        <form id="loginForm">
          <div class="form-group">
            <label for="username">Username</label>
            <input type="text" id="username" placeholder="Enter your username" required>
          </div>
          <div class="form-group">
            <label for="password">Password</label>
            <input type="password" id="password" placeholder="Enter your password" required>
          </div>
          <button type="submit" class="btn">Login</button>
        </form>

        <div class="signup-link">
          Not a member yet? <a href="register.html">Sign up here</a>
          <br>
            Are a staff Member <a href="admin-login.html">LogIn here</a>
        </div>
      </div>
    </div>

    

    <script>
      const SUPABASE_URL = "https://bxufacemathzdfqzmlad.supabase.co";
      const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJ4dWZhY2VtYXRoemRmcXptbGFkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgzMTg0NTYsImV4cCI6MjA3Mzg5NDQ1Nn0.BFogsvLqjVH_TX-WsOcFYl0AopUkELwN0BhuJ2O0lwU";
      const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

      function showError(msg){ document.getElementById("errorAlert").textContent = msg; document.getElementById("errorAlert").style.display="block"; document.getElementById("successAlert").style.display="none"; }
      function showSuccess(msg){ document.getElementById("successAlert").textContent = msg; document.getElementById("successAlert").style.display="block"; document.getElementById("errorAlert").style.display="none"; }

      document.getElementById("loginForm").addEventListener("submit", async (e) => {
        e.preventDefault();
        const uname = document.getElementById("username").value.trim();
        const password = document.getElementById("password").value.trim();

        if(!uname || !password){ showError("Please enter username and password."); return; }

        try {
          const { data: members, error } = await supabase
            .from("member")
            .select("*")
            .eq("uname", uname)
            .eq("password", password)
            .limit(1);

           


          if(error){ showError("Login failed: " + error.message); return; }
          if(!members || members.length === 0){ showError("Invalid username or password."); return; }

          const member = members[0];
          localStorage.setItem("member", JSON.stringify(member));
          showSuccess("Login successful! Redirecting...");

          setTimeout(()=>{ window.location.href = "member-dasbord.html"; }, 1500);
        } catch(err){ showError("Unexpected error: " + err.message); }
      });
    </script>
  </body>
</html>
